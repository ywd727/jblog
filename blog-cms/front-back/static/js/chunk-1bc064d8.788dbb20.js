(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bc064d8"],{9762:function(e,t,n){},aaef:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.hintShow?n("el-alert",{attrs:{title:"图床配置及用法请查看：https://github.com/Naccl/PictureHosting",type:"warning","show-icon":""}}):e._e(),n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("GitHub配置")])]),n("el-row",[n("el-col",[n("el-input",{staticStyle:{"min-width":"500px"},attrs:{placeholder:"请输入token进行初始化",clearable:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchGithubUser(t)}},model:{value:e.githubToken,callback:function(t){e.githubToken=t},expression:"githubToken"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchGithubUser},slot:"append"},[e._v("查询")])],1)],1)],1),n("el-row",[n("el-col",[n("span",{staticClass:"middle"},[e._v("当前用户：")]),n("el-avatar",{attrs:{size:50,src:e.githubUserInfo.avatar_url}},[e._v("User")]),n("span",{staticClass:"middle"},[e._v(e._s(e.githubUserInfo.login))])],1)],1),n("el-row",[n("el-col",[n("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-check",disabled:!e.isGithubSave},on:{click:function(t){return e.saveGithub(!0)}}},[e._v("保存配置")]),n("el-button",{attrs:{type:"info",size:"medium",icon:"el-icon-close"},on:{click:function(t){return e.saveGithub(!1)}}},[e._v("清除配置")])],1)],1)],1),n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("又拍云存储配置")])]),n("el-form",{attrs:{model:e.upyunConfig,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"操作员名称"}},[n("el-input",{model:{value:e.upyunConfig.username,callback:function(t){e.$set(e.upyunConfig,"username",t)},expression:"upyunConfig.username"}})],1),n("el-form-item",{attrs:{label:"操作员密码"}},[n("el-input",{model:{value:e.upyunConfig.password,callback:function(t){e.$set(e.upyunConfig,"password",t)},expression:"upyunConfig.password"}})],1),n("el-form-item",{attrs:{label:"存储空间名"}},[n("el-input",{model:{value:e.upyunConfig.bucketName,callback:function(t){e.$set(e.upyunConfig,"bucketName",t)},expression:"upyunConfig.bucketName"}})],1),n("el-form-item",{attrs:{label:"CDN访问域名"}},[n("el-input",{model:{value:e.upyunConfig.domain,callback:function(t){e.$set(e.upyunConfig,"domain",t)},expression:"upyunConfig.domain"}})],1),n("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-check",disabled:!e.isUpyunSave},on:{click:function(t){return e.saveUpyun(!0)}}},[e._v("保存配置")]),n("el-button",{attrs:{type:"info",size:"medium",icon:"el-icon-close"},on:{click:function(t){return e.saveUpyun(!1)}}},[e._v("清除配置")])],1)],1)],1)},i=[],u=(n("e9c4"),n("99af"),n("c9f7")),a={name:"Setting",data:function(){return{githubToken:"",githubUserInfo:{login:"未配置"},isGithubSave:!1,hintShow:!1,upyunConfig:{username:"",password:"",bucketName:"",domain:""}}},computed:{isUpyunSave:function(){return this.upyunConfig.username&&this.upyunConfig.password&&this.upyunConfig.bucketName&&this.upyunConfig.domain}},created:function(){this.githubToken=localStorage.getItem("githubToken");var e=localStorage.getItem("githubUserInfo");this.githubToken&&e?(this.githubUserInfo=JSON.parse(e),this.isGithubSave=!0):this.githubUserInfo={login:"未配置"};var t=localStorage.getItem("upyunConfig");t&&(this.upyunConfig=JSON.parse(t));var n=window.localStorage.getItem("user")||"{}",o=JSON.parse(n);"{}"!==n&&"ROLE_admin"!==o.role&&(this.hintShow=!0)},methods:{searchGithubUser:function(){var e=this;Object(u["c"])(this.githubToken).then((function(t){e.githubUserInfo=t,e.isGithubSave=!0}))},saveGithub:function(e){e?(localStorage.setItem("githubToken",this.githubToken),localStorage.setItem("githubUserInfo",JSON.stringify(this.githubUserInfo)),this.msgSuccess("保存成功")):(localStorage.removeItem("githubToken"),localStorage.removeItem("githubUserInfo"),this.msgSuccess("清除成功"))},saveUpyun:function(e){e?(localStorage.setItem("upyunToken",btoa("".concat(this.upyunConfig.username,":").concat(this.upyunConfig.password))),localStorage.setItem("upyunConfig",JSON.stringify(this.upyunConfig)),this.msgSuccess("保存成功")):(localStorage.removeItem("upyunConfig"),this.msgSuccess("清除成功"))}}},r=a,s=(n("f024"),n("2877")),c=Object(s["a"])(r,o,i,!1,null,null,null);t["default"]=c.exports},c9f7:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return p}));n("ac1f"),n("00b4"),n("d3b7"),n("99af");var o=n("bc3a"),i=n.n(o),u=n("323e"),a=n.n(u),r=(n("a5d8"),n("5c96")),s=i.a.create({baseURL:"https://api.github.com",timeout:3e4});function c(e){return s({url:"/user",method:"GET",headers:{Authorization:"token ".concat(e)}})}function l(e){return s({url:"/users/".concat(e,"/repos"),method:"GET"})}function f(e,t,n){return s({url:"/repos/".concat(e,"/").concat(t,"/contents").concat(n),method:"GET"})}function h(e,t,n,o){return s({url:"/repos/".concat(e,"/").concat(t,"/contents/").concat(n),method:"DELETE",data:o})}function p(e,t,n,o,i){return s({url:"/repos/".concat(e,"/").concat(t,"/contents").concat(n,"/").concat(o),method:"PUT",data:i})}s.interceptors.request.use((function(e){a.a.start(),/get/i.test(e.method)&&(e.params=e.params||{},e.params.t=(new Date).getTime());var t=localStorage.getItem("githubToken");return t&&(e.headers.Authorization="token ".concat(t)),e}),(function(e){return console.info(e),Promise.reject(e)})),s.interceptors.response.use((function(e){return a.a.done(),e.data}),(function(e){return console.info(e),r["Message"].error(e.message),Promise.reject(e)}))},e9c4:function(e,t,n){var o=n("23e7"),i=n("d066"),u=n("d039"),a=i("JSON","stringify"),r=/[\uD800-\uDFFF]/g,s=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,l=function(e,t,n){var o=n.charAt(t-1),i=n.charAt(t+1);return s.test(e)&&!c.test(i)||c.test(e)&&!s.test(o)?"\\u"+e.charCodeAt(0).toString(16):e},f=u((function(){return'"\\udf06\\ud834"'!==a("\udf06\ud834")||'"\\udead"'!==a("\udead")}));a&&o({target:"JSON",stat:!0,forced:f},{stringify:function(e,t,n){var o=a.apply(null,arguments);return"string"==typeof o?o.replace(r,l):o}})},f024:function(e,t,n){"use strict";n("9762")}}]);