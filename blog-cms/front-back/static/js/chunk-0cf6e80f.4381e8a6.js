(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cf6e80f"],{"1c16":function(e,t,n){"use strict";n("3cff")},"3cff":function(e,t,n){},4020:function(e,t,n){"use strict";n("d3b7");var a=n("bc3a"),o=n.n(a),r=n("323e"),i=n.n(r),s=(n("a5d8"),n("5c96")),c=o.a.create({baseURL:"http://81.68.124.95:8090/admin/",timeout:5e3}),l=o.a.CancelToken;c.interceptors.request.use((function(e){var t=window.localStorage.getItem("user")||"{}",n=JSON.parse(t);if("{}"!==t&&"ROLE_admin"!==n.role&&"get"!==e.method)return e.cancelToken=new l((function(e){e("演示模式，不允许操作")})),e;i.a.start();var a=window.localStorage.getItem("token");return a&&(e.headers.Authorization=a),e}),(function(e){return console.info(e),Promise.reject(e)})),c.interceptors.response.use((function(e){i.a.done();var t=e.data;if(200!==t.code){var n=t.msg||"Error";return s["Message"].error(n),Promise.reject(new Error(n))}return t}),(function(e){return console.info(e),s["Message"].error(e.message),Promise.reject(e)})),t["a"]=c},"6eba":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{attrs:{inline:""}},[n("el-form-item",{attrs:{label:"最后访问时间"}},[n("DateTimeRangePicker",{attrs:{date:e.queryInfo.date,setDate:e.setDate}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1),n("el-table",{attrs:{data:e.visitorList}},[n("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),n("el-table-column",{attrs:{label:"访客标识",prop:"uuid","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"IP",prop:"ip","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"IP来源",prop:"ipSource","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"操作系统",prop:"os","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"浏览器",prop:"browser","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"首次访问",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFormat")(t.row.createTime)))]}}])}),n("el-table-column",{attrs:{width:"170"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v(" 最后访问 "),n("el-tooltip",{attrs:{effect:"dark",content:"每日凌晨自动更新",placement:"top"}},[n("i",{staticClass:"el-icon-question"})])]}},{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFormat")(t.row.lastTime)))]}}])}),n("el-table-column",{attrs:{prop:"pv",width:"70"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v(" PV "),n("el-tooltip",{attrs:{effect:"dark",content:"访客总浏览量，每日凌晨自动更新",placement:"top"}},[n("i",{staticClass:"el-icon-question"})])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"warning",icon:"el-icon-view",size:"mini"},on:{click:function(n){return e.showLog(t.row.uuid)}}},[e._v("查看记录")]),n("el-popconfirm",{attrs:{title:"确定删除吗？",icon:"el-icon-delete",iconColor:"red"},on:{onConfirm:function(n){return e.deleteVisitorById(t.row)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),n("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[10,20,30,50],"page-size":e.queryInfo.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper",background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},o=[],r=n("5530"),i=n("6350"),s=n("4020");function c(e){return Object(s["a"])({url:"visitors",method:"GET",params:Object(r["a"])({},e)})}function l(e,t){return Object(s["a"])({url:"visitor",method:"DELETE",params:{id:e,uuid:t}})}var u=n("eb7a"),f={name:"Visitor",components:{DateTimeRangePicker:u["a"],Breadcrumb:i["a"]},data:function(){return{queryInfo:{date:[],pageNum:1,pageSize:10},visitorList:[],total:0}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=Object(r["a"])({},this.queryInfo);t.date&&2===t.date.length&&(t.date=t.date[0]+","+t.date[1]),c(t).then((function(t){e.visitorList=t.data.list,e.total=t.data.total}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getData()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getData()},deleteVisitorById:function(e){var t=this;l(e.id,e.uuid).then((function(e){t.msgSuccess(e.msg),t.getData()}))},showLog:function(e){this.$router.push({path:"/log/visit",query:{uuid:e}})},search:function(){this.queryInfo.pageNum=1,this.queryInfo.pageSize=10,this.getData()},setDate:function(e){this.queryInfo.date=e}}},d=f,p=(n("1c16"),n("2877")),m=Object(p["a"])(d,a,o,!1,null,"4fec5254",null);t["default"]=m.exports},eb7a:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-date-picker",{attrs:{type:"datetimerange",align:"center",size:"small","unlink-panels":"","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"-"},on:{change:function(t){return e.setDate(e.thisDate)}},model:{value:e.thisDate,callback:function(t){e.thisDate=t},expression:"thisDate"}})},o=[],r={name:"DateTimeRangePicker",props:{date:{required:!0},setDate:{type:Function,required:!0}},data:function(){return{thisDate:this.date,pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){var t=new Date,n=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),n.setHours(23),n.setMinutes(59),n.setSeconds(59),e.$emit("pick",[t,n])}},{text:"昨天",onClick:function(e){var t=new Date,n=new Date,a=new Date;n.setTime(t.getTime()-864e5),a.setTime(t.getTime()-864e5),n.setHours(0),n.setMinutes(0),n.setSeconds(0),a.setHours(23),a.setMinutes(59),a.setSeconds(59),e.$emit("pick",[n,a])}},{text:"最近三天",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e5),e.$emit("pick",[n,t])}},{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}}]}}}},i=r,s=n("2877"),c=Object(s["a"])(i,a,o,!1,null,"7be8d8c8",null);t["a"]=c.exports}}]);