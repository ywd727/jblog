{"version":3,"sources":["webpack:///./src/views/moments/Moments.vue?7cd2","webpack:///./src/api/moment.js","webpack:///src/views/moments/Moments.vue","webpack:///./src/views/moments/Moments.vue?2896","webpack:///./src/views/moments/Moments.vue","webpack:///./src/views/moments/Moments.vue?9831"],"names":["render","_vm","this","_h","$createElement","_c","_self","_m","staticClass","_l","moment","index","key","attrs","$store","state","introduction","avatar","staticStyle","_v","_s","name","_f","createTime","directives","rawName","class","published","domProps","content","on","$event","like","id","isLike","likes","pageNum","totalPage","handleCurrentChange","staticRenderFns","getMomentListByPageNum","token","axios","url","method","headers","Authorization","params","likeMoment","component"],"mappings":"gJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACJ,EAAIM,GAAG,GAAGF,EAAG,MAAM,CAACG,YAAY,8CAA8C,CAACH,EAAG,MAAM,CAACG,YAAY,WAAWP,EAAIQ,GAAIR,EAAc,YAAE,SAASS,EAAOC,GAAO,OAAON,EAAG,MAAM,CAACO,IAAID,EAAMH,YAAY,UAAU,CAACH,EAAG,MAAM,CAACG,YAAY,UAAU,CAACH,EAAG,MAAM,CAACQ,MAAM,CAAC,IAAMZ,EAAIa,OAAOC,MAAMC,aAAaC,YAAYZ,EAAG,MAAM,CAACG,YAAY,WAAW,CAACH,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,OAAO,CAACa,YAAY,CAAC,cAAc,QAAQ,CAACjB,EAAIkB,GAAGlB,EAAImB,GAAGnB,EAAIa,OAAOC,MAAMC,aAAaK,SAAShB,EAAG,OAAO,CAACG,YAAY,iBAAiB,CAACP,EAAIkB,GAAGlB,EAAImB,GAAGnB,EAAIqB,GAAG,cAAPrB,CAAsBS,EAAOa,kBAAkBlB,EAAG,MAAM,CAACmB,WAAW,CAAC,CAACH,KAAK,SAASI,QAAQ,aAAajB,YAAY,eAAekB,MAAM,CAAC,SAAWhB,EAAOiB,WAAWC,SAAS,CAAC,UAAY3B,EAAImB,GAAGV,EAAOmB,YAAYxB,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,IAAI,CAACG,YAAY,eAAesB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO9B,EAAI+B,KAAKtB,EAAOuB,OAAO,CAAC5B,EAAG,IAAI,CAACG,YAAY,aAAakB,MAAMzB,EAAIiC,OAAOxB,EAAOuB,IAAI,aAAa,YAAYhC,EAAIkB,GAAGlB,EAAImB,GAAGV,EAAOyB,OAAO,gBAAe,GAAG9B,EAAG,gBAAgB,CAACG,YAAY,aAAaK,MAAM,CAAC,eAAeZ,EAAImC,QAAQ,aAAanC,EAAIoC,UAAU,OAAS,oBAAoB,WAAa,GAAG,sBAAsB,IAAIP,GAAG,CAAC,iBAAiB7B,EAAIqC,wBAAwB,MACn0CC,EAAkB,CAAC,WAAa,IAAItC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACG,YAAY,0BAA0BU,YAAY,CAAC,aAAa,WAAW,CAACb,EAAG,KAAK,CAACG,YAAY,cAAc,CAACP,EAAIkB,GAAG,c,4CCCpO,SAASqB,EAAuBC,EAAOL,GAC7C,OAAOM,eAAM,CACZC,IAAK,UACLC,OAAQ,MACRC,QAAS,CACRC,cAAeL,GAEhBM,OAAQ,CACPX,aAKI,SAASY,EAAWf,GAC1B,OAAOS,eAAM,CACZC,IAAK,eAAF,OAAiBV,GACpBW,OAAQ,SCkBV,OACA,eACA,KAFA,WAGA,OAEA,6EACA,cACA,UACA,cAGA,QAXA,WAYA,sBAEA,UACA,OADA,WAEA,mBACA,2CAIA,OACA,cADA,SACA,GAEA,iEAGA,SACA,cADA,WACA,WAEA,4CACA,QACA,oCACA,cACA,yBACA,8BAEA,qBAEA,kBACA,uBAGA,oBAhBA,SAgBA,GACA,mBACA,eACA,sBAEA,KArBA,SAqBA,cACA,iCACA,cACA,iBACA,iBAIA,uBACA,cACA,WACA,YACA,iBAEA,wBACA,kCACA,YACA,qBAIA,WACA,YACA,oBAGA,kBACA,WACA,aACA,qBCjHgW,I,wBCQ5VK,EAAY,eACd,EACAjD,EACAuC,GACA,EACA,KACA,WACA,MAIa,aAAAU,E,2CCnBf","file":"js/chunk-c594a15c.c141cda3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_c('div',{staticClass:\"ui attached segment m-padding-bottom-large\"},[_c('div',{staticClass:\"moments\"},_vm._l((_vm.momentList),function(moment,index){return _c('div',{key:index,staticClass:\"moment\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":_vm.$store.state.introduction.avatar}})]),_c('div',{staticClass:\"ui card\"},[_c('div',{staticClass:\"content m-top\"},[_c('span',{staticStyle:{\"font-weight\":\"700\"}},[_vm._v(_vm._s(_vm.$store.state.introduction.name))]),_c('span',{staticClass:\"right floated\"},[_vm._v(_vm._s(_vm._f(\"dateFromNow\")(moment.createTime)))])]),_c('div',{directives:[{name:\"viewer\",rawName:\"v-viewer\"}],staticClass:\"content typo\",class:{'privacy':!moment.published},domProps:{\"innerHTML\":_vm._s(moment.content)}}),_c('div',{staticClass:\"extra content\"},[_c('a',{staticClass:\"left floated\",on:{\"click\":function($event){return _vm.like(moment.id)}}},[_c('i',{staticClass:\"heart icon\",class:_vm.isLike(moment.id)?'like-color':'outline'}),_vm._v(_vm._s(moment.likes)+\" \")])])])])}),0),_c('el-pagination',{staticClass:\"pagination\",attrs:{\"current-page\":_vm.pageNum,\"page-count\":_vm.totalPage,\"layout\":\"prev, pager, next\",\"background\":\"\",\"hide-on-single-page\":\"\"},on:{\"current-change\":_vm.handleCurrentChange}})],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui top attached segment\",staticStyle:{\"text-align\":\"center\"}},[_c('h2',{staticClass:\"m-text-500\"},[_vm._v(\"我的动态\")])])}]\n\nexport { render, staticRenderFns }","import axios from '@/plugins/axios'\r\n\r\nexport function getMomentListByPageNum(token, pageNum) {\r\n\treturn axios({\r\n\t\turl: 'moments',\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\tAuthorization: token,\r\n\t\t},\r\n\t\tparams: {\r\n\t\t\tpageNum\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport function likeMoment(id) {\r\n\treturn axios({\r\n\t\turl: `moment/like/${id}`,\r\n\t\tmethod: 'POST',\r\n\t})\r\n}","<template>\r\n\t<div>\r\n\t\t<div class=\"ui top attached segment\" style=\"text-align: center\">\r\n\t\t\t<h2 class=\"m-text-500\">我的动态</h2>\r\n\t\t</div>\r\n\t\t<div class=\"ui attached segment m-padding-bottom-large\">\r\n\t\t\t<div class=\"moments\">\r\n\t\t\t\t<div class=\"moment\" v-for=\"(moment,index) in momentList\" :key=\"index\">\r\n\t\t\t\t\t<div class=\"avatar\">\r\n\t\t\t\t\t\t<img :src=\"$store.state.introduction.avatar\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"ui card\">\r\n\t\t\t\t\t\t<div class=\"content m-top\">\r\n\t\t\t\t\t\t\t<span style=\"font-weight: 700\">{{ $store.state.introduction.name }}</span>\r\n\t\t\t\t\t\t\t<span class=\"right floated\">{{ moment.createTime | dateFromNow }}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"content typo\" :class=\"{'privacy':!moment.published}\" v-viewer v-html=\"moment.content\"></div>\r\n\t\t\t\t\t\t<div class=\"extra content\">\r\n\t\t\t\t\t\t\t<a class=\"left floated\" @click=\"like(moment.id)\">\r\n\t\t\t\t\t\t\t\t<i class=\"heart icon\" :class=\"isLike(moment.id)?'like-color':'outline'\"></i>{{ moment.likes }}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<el-pagination @current-change=\"handleCurrentChange\" :current-page=\"pageNum\" :page-count=\"totalPage\"\r\n\t\t\t               layout=\"prev, pager, next\" background hide-on-single-page class=\"pagination\">\r\n\t\t\t</el-pagination>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {getMomentListByPageNum, likeMoment} from \"@/api/moment\";\r\n\r\n\texport default {\r\n\t\tname: \"Moments\",\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t//用localStorage本地存储已点赞的动态id数组\r\n\t\t\t\tlikeMomentIds: JSON.parse(window.localStorage.getItem('likeMomentIds') || '[]'),\r\n\t\t\t\tmomentList: [],\r\n\t\t\t\tpageNum: 1,\r\n\t\t\t\ttotalPage: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getMomentList()\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tisLike() {\r\n\t\t\t\treturn function (id) {\r\n\t\t\t\t\treturn this.likeMomentIds.indexOf(id) > -1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tlikeMomentIds(newValue) {\r\n\t\t\t\t//将likeMomentIds最新值的json数据保存到localStorage\r\n\t\t\t\twindow.localStorage.setItem('likeMomentIds', JSON.stringify(newValue))\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetMomentList() {\r\n\t\t\t\t//如果有则发送博主身份Token\r\n\t\t\t\tconst adminToken = window.localStorage.getItem('adminToken')\r\n\t\t\t\tconst token = adminToken ? adminToken : ''\r\n\t\t\t\tgetMomentListByPageNum(token, this.pageNum).then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.momentList = res.data.list\r\n\t\t\t\t\t\tthis.totalPage = res.data.totalPage\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.msgError(res.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.msgError(\"请求失败\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(newPage) {\r\n\t\t\t\tthis.scrollToTop()\r\n\t\t\t\tthis.pageNum = newPage\r\n\t\t\t\tthis.getMomentList()\r\n\t\t\t},\r\n\t\t\tlike(id) {\r\n\t\t\t\tif (this.likeMomentIds.indexOf(id) > -1) {\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: '不可以重复点赞哦',\r\n\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlikeMoment(id).then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.likeMomentIds.push(id)\r\n\t\t\t\t\t\tthis.momentList.forEach(item => {\r\n\t\t\t\t\t\t\tif (item.id === id) {\r\n\t\t\t\t\t\t\t\treturn item.likes++\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: '异常错误',\r\n\t\t\t\t\t\ttype: 'error'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.avatar {\r\n\t\tmargin-left: -62.5px;\r\n\t\tfloat: left !important;\r\n\t}\r\n\r\n\t.avatar img {\r\n\t\theight: 45px;\r\n\t\twidth: 45px;\r\n\t\tborder-radius: 500px;\r\n\t}\r\n\r\n\t.moments {\r\n\t\tmargin-left: 26px !important;\r\n\t\tpadding-left: 40px !important;\r\n\t\tborder-left: 1px solid #dee5e7 !important;\r\n\t}\r\n\r\n\t.moment {\r\n\t\tmargin-top: 30px;\r\n\t}\r\n\r\n\t.moment:first-child {\r\n\t\tmargin-top: 0 !important;\r\n\t}\r\n\r\n\t.card {\r\n\t\twidth: 100% !important;\r\n\t}\r\n\r\n\t.card:before {\r\n\t\tborder-width: 0 0 1px 1px !important;\r\n\t\ttransform: translateX(-50%) translateY(-50%) rotate(45deg) !important;\r\n\t\tbottom: auto !important;\r\n\t\tright: auto !important;\r\n\t\ttop: 22px !important;\r\n\t\tleft: 0 !important;\r\n\t\tposition: absolute !important;\r\n\t\tcontent: '' !important;\r\n\t\tbackground-image: none !important;\r\n\t\tz-index: 2 !important;\r\n\t\twidth: 12px !important;\r\n\t\theight: 12px !important;\r\n\t\ttransition: background .1s ease !important;\r\n\t\tbackground-color: inherit !important;\r\n\t\tborder-style: solid !important;\r\n\t\tborder-color: #d4d4d5 !important;\r\n\t}\r\n\r\n\t.content.m-top {\r\n\t\tpadding: 10px 14px !important;\r\n\t}\r\n\r\n\t.content .right.floated {\r\n\t\tfont-size: 12px !important;\r\n\t}\r\n\r\n\t.content.typo * {\r\n\t\tfont-size: 14px !important;\r\n\t}\r\n\r\n\t.extra.content {\r\n\t\tpadding: 5px 14px !important;\r\n\t}\r\n\r\n\t.extra.content a {\r\n\t\tcolor: rgba(0, 0, 0, 0.7) !important;\r\n\t\tfont-size: 12px !important;\r\n\t}\r\n\r\n\t.extra.content a:hover {\r\n\t\tcolor: red !important;\r\n\t}\r\n\r\n\t.extra.content .like-color {\r\n\t\tcolor: red !important;\r\n\t}\r\n\r\n\t.extra.content i {\r\n\t\tfont-size: 12px !important;\r\n\t}\r\n\r\n\t.pagination {\r\n\t\ttext-align: center;\r\n\t\tmargin-top: 3em;\r\n\t}\r\n\r\n\t.privacy {\r\n\t\tbackground: repeating-linear-gradient(145deg, #f2f2f2, #f2f2f2 15px, #fff 0, #fff 30px) !important;\r\n\t}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moments.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Moments.vue?vue&type=template&id=75aebb7f&scoped=true&\"\nimport script from \"./Moments.vue?vue&type=script&lang=js&\"\nexport * from \"./Moments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Moments.vue?vue&type=style&index=0&id=75aebb7f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"75aebb7f\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moments.vue?vue&type=style&index=0&id=75aebb7f&scoped=true&lang=css&\""],"sourceRoot":""}