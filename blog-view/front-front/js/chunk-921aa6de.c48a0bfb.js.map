{"version":3,"sources":["webpack:///./src/views/blog/Blog.vue?4164","webpack:///src/views/blog/Blog.vue","webpack:///./src/views/blog/Blog.vue?4706","webpack:///./src/views/blog/Blog.vue","webpack:///./src/views/blog/Blog.vue?0675","webpack:///./src/api/blog.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","blog","_e","_v","_s","title","_f","createTime","views","words","readTime","on","$event","preventDefault","bigFontSize","_m","changeFocusMode","attrs","category","name","directives","rawName","class","domProps","content","staticStyle","$store","state","siteInfo","reward","slot","_l","tag","index","key","color","introduction","updateTime","blogId","staticRenderFns","component","getBlogById","token","id","axios","url","method","headers","Authorization","params","checkBlogPassword","blogPasswordForm","data","getSearchBlogList","query"],"mappings":"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","file":"js/chunk-921aa6de.c48a0bfb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"ui padded attached segment m-padded-tb-large\"},[(_vm.blog.top)?_c('div',{staticClass:\"ui large red right corner label\"},[_c('i',{staticClass:\"arrow alternate circle up icon\"})]):_vm._e(),_c('div',{staticClass:\"ui middle aligned mobile reversed stackable\"},[_c('div',{staticClass:\"ui grid m-margin-lr\"},[_c('div',{staticClass:\"row m-padded-tb-small\"},[_c('h2',{staticClass:\"ui header m-center\"},[_vm._v(_vm._s(_vm.blog.title))])]),_c('div',{staticClass:\"row m-padded-tb-small\"},[_c('div',{staticClass:\"ui horizontal link list m-center\"},[_c('div',{staticClass:\"item m-datetime\"},[_c('i',{staticClass:\"small calendar icon\"}),_c('span',[_vm._v(_vm._s(_vm._f(\"dateFormat\")(_vm.blog.createTime,'YYYY-MM-DD')))])]),_c('div',{staticClass:\"item m-views\"},[_c('i',{staticClass:\"small eye icon\"}),_c('span',[_vm._v(_vm._s(_vm.blog.views))])]),_c('div',{staticClass:\"item m-common-black\"},[_c('i',{staticClass:\"small pencil alternate icon\"}),_c('span',[_vm._v(\"字数≈\"+_vm._s(_vm.blog.words)+\"字\")])]),_c('div',{staticClass:\"item m-common-black\"},[_c('i',{staticClass:\"small clock icon\"}),_c('span',[_vm._v(\"阅读时长≈\"+_vm._s(_vm.blog.readTime)+\"分\")])]),_c('a',{staticClass:\"item m-common-black\",on:{\"click\":function($event){$event.preventDefault();_vm.bigFontSize=!_vm.bigFontSize}}},[_vm._m(0)]),_c('a',{staticClass:\"item m-common-black\",on:{\"click\":function($event){$event.preventDefault();return _vm.changeFocusMode($event)}}},[_vm._m(1)])])]),(_vm.blog.category)?_c('router-link',{staticClass:\"ui orange large ribbon label\",attrs:{\"to\":(\"/category/\" + (_vm.blog.category.name))}},[_c('i',{staticClass:\"small folder open icon\"}),_c('span',{staticClass:\"m-text-500\"},[_vm._v(_vm._s(_vm.blog.category.name))])]):_vm._e(),_c('div',{directives:[{name:\"viewer\",rawName:\"v-viewer\"}],staticClass:\"typo js-toc-content m-padded-tb-small match-braces rainbow-braces\",class:{'m-big-fontsize':_vm.bigFontSize},domProps:{\"innerHTML\":_vm._s(_vm.blog.content)}}),_c('div',{staticStyle:{\"margin\":\"2em auto\"}},[(_vm.blog.appreciation)?_c('el-popover',{attrs:{\"placement\":\"top\",\"width\":\"220\",\"trigger\":\"click\"}},[_c('div',{staticClass:\"ui orange basic label\",staticStyle:{\"width\":\"100%\"}},[_c('div',{staticClass:\"image\"},[_c('div',{staticStyle:{\"font-size\":\"12px\",\"text-align\":\"center\",\"margin-bottom\":\"5px\"}},[_vm._v(\"一毛是鼓励\")]),_c('img',{staticClass:\"ui rounded bordered image\",staticStyle:{\"width\":\"100%\"},attrs:{\"src\":_vm.$store.state.siteInfo.reward,\"alt\":\"\"}}),_c('div',{staticStyle:{\"font-size\":\"12px\",\"text-align\":\"center\",\"margin-top\":\"5px\"}},[_vm._v(\"一块是真爱\")])])]),_c('el-button',{staticClass:\"ui orange inverted circular button m-text-500\",attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_vm._v(\"赞赏\")])],1):_vm._e()],1),_c('el-divider'),_c('div',{staticClass:\"row m-padded-tb-no\"},[_c('div',{staticClass:\"column m-padding-left-no\"},_vm._l((_vm.blog.tags),function(tag,index){return _c('router-link',{key:index,staticClass:\"ui tag label m-text-500 m-margin-small\",class:tag.color,attrs:{\"to\":(\"/tag/\" + (tag.name))}},[_vm._v(_vm._s(tag.name))])}),1)])],1)])]),_c('div',{staticClass:\"ui attached positive message\"},[_c('ul',{staticClass:\"list\"},[_c('li',[_vm._v(\"作者：\"+_vm._s(_vm.$store.state.introduction.name)+\" \"),_c('router-link',{attrs:{\"to\":\"/about\"}},[_vm._v(\"（联系作者）\")])],1),_c('li',[_vm._v(\"发表时间：\"+_vm._s(_vm._f(\"dateFormat\")(_vm.blog.createTime,'YYYY-MM-DD HH:mm')))]),_c('li',[_vm._v(\"最后修改：\"+_vm._s(_vm._f(\"dateFormat\")(_vm.blog.updateTime,'YYYY-MM-DD HH:mm')))]),_vm._m(2)])]),_c('div',{staticClass:\"ui bottom teal attached segment threaded comments\"},[(_vm.blog.commentEnabled)?_c('CommentList',{attrs:{\"page\":0,\"blogId\":_vm.blogId}}):_c('h3',{staticClass:\"ui header\"},[_vm._v(\"评论已关闭\")])],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"data-inverted\":\"\",\"data-tooltip\":\"点击切换字体大小\",\"data-position\":\"top center\"}},[_c('i',{staticClass:\"font icon\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"data-inverted\":\"\",\"data-tooltip\":\"专注模式\",\"data-position\":\"top center\"}},[_c('i',{staticClass:\"book icon\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',[_vm._v(\"本站点采用\"),_c('a',{attrs:{\"href\":\"https://creativecommons.org/licenses/by/4.0/\",\"target\":\"_blank\"}},[_vm._v(\" 署名 4.0 国际 (CC BY 4.0) \")]),_vm._v(\"创作共享协议。可自由转载、引用，并且允许商业性使用。但需署名作者且注明文章出处。\")])}]\n\nexport { render, staticRenderFns }","<template>\r\n\t<div>\r\n\t\t<div class=\"ui padded attached segment m-padded-tb-large\">\r\n\t\t\t<div class=\"ui large red right corner label\" v-if=\"blog.top\">\r\n\t\t\t\t<i class=\"arrow alternate circle up icon\"></i>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"ui middle aligned mobile reversed stackable\">\r\n\t\t\t\t<div class=\"ui grid m-margin-lr\">\r\n\t\t\t\t\t<!--标题-->\r\n\t\t\t\t\t<div class=\"row m-padded-tb-small\">\r\n\t\t\t\t\t\t<h2 class=\"ui header m-center\">{{ blog.title }}</h2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<!--文章简要信息-->\r\n\t\t\t\t\t<div class=\"row m-padded-tb-small\">\r\n\t\t\t\t\t\t<div class=\"ui horizontal link list m-center\">\r\n\t\t\t\t\t\t\t<div class=\"item m-datetime\">\r\n\t\t\t\t\t\t\t\t<i class=\"small calendar icon\"></i><span>{{ blog.createTime | dateFormat('YYYY-MM-DD') }}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"item m-views\">\r\n\t\t\t\t\t\t\t\t<i class=\"small eye icon\"></i><span>{{ blog.views }}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"item m-common-black\">\r\n\t\t\t\t\t\t\t\t<i class=\"small pencil alternate icon\"></i><span>字数≈{{ blog.words }}字</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"item m-common-black\">\r\n\t\t\t\t\t\t\t\t<i class=\"small clock icon\"></i><span>阅读时长≈{{ blog.readTime }}分</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<a class=\"item m-common-black\" @click.prevent=\"bigFontSize=!bigFontSize\">\r\n\t\t\t\t\t\t\t\t<div data-inverted=\"\" data-tooltip=\"点击切换字体大小\" data-position=\"top center\">\r\n\t\t\t\t\t\t\t\t\t<i class=\"font icon\"></i>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<a class=\"item m-common-black\" @click.prevent=\"changeFocusMode\">\r\n\t\t\t\t\t\t\t\t<div data-inverted=\"\" data-tooltip=\"专注模式\" data-position=\"top center\">\r\n\t\t\t\t\t\t\t\t\t<i class=\"book icon\"></i>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<!--分类-->\r\n\t\t\t\t\t<router-link :to=\"`/category/${blog.category.name}`\" class=\"ui orange large ribbon label\" v-if=\"blog.category\">\r\n\t\t\t\t\t\t<i class=\"small folder open icon\"></i><span class=\"m-text-500\">{{ blog.category.name }}</span>\r\n\t\t\t\t\t</router-link>\r\n\t\t\t\t\t<!--文章Markdown正文-->\r\n\t\t\t\t\t<div class=\"typo js-toc-content m-padded-tb-small match-braces rainbow-braces\" v-viewer :class=\"{'m-big-fontsize':bigFontSize}\" v-html=\"blog.content\"></div>\r\n\t\t\t\t\t<!--赞赏-->\r\n\t\t\t\t\t<div style=\"margin: 2em auto\">\r\n\t\t\t\t\t\t<el-popover placement=\"top\" width=\"220\" trigger=\"click\" v-if=\"blog.appreciation\">\r\n\t\t\t\t\t\t\t<div class=\"ui orange basic label\" style=\"width: 100%\">\r\n\t\t\t\t\t\t\t\t<div class=\"image\">\r\n\t\t\t\t\t\t\t\t\t<div style=\"font-size: 12px;text-align: center;margin-bottom: 5px;\">一毛是鼓励</div>\r\n\t\t\t\t\t\t\t\t\t<img :src=\"$store.state.siteInfo.reward\" alt=\"\" class=\"ui rounded bordered image\" style=\"width: 100%\">\r\n\t\t\t\t\t\t\t\t\t<div style=\"font-size: 12px;text-align: center;margin-top: 5px;\">一块是真爱</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<el-button slot=\"reference\" class=\"ui orange inverted circular button m-text-500\">赞赏</el-button>\r\n\t\t\t\t\t\t</el-popover>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<!--横线-->\r\n\t\t\t\t\t<el-divider></el-divider>\r\n\t\t\t\t\t<!--标签-->\r\n\t\t\t\t\t<div class=\"row m-padded-tb-no\">\r\n\t\t\t\t\t\t<div class=\"column m-padding-left-no\">\r\n\t\t\t\t\t\t\t<router-link :to=\"`/tag/${tag.name}`\" class=\"ui tag label m-text-500 m-margin-small\" :class=\"tag.color\" v-for=\"(tag,index) in blog.tags\" :key=\"index\">{{ tag.name }}</router-link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!--博客信息-->\r\n\t\t<div class=\"ui attached positive message\">\r\n\t\t\t<ul class=\"list\">\r\n\t\t\t\t<li>作者：{{ $store.state.introduction.name }}\r\n\t\t\t\t\t<router-link to=\"/about\">（联系作者）</router-link>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>发表时间：{{ blog.createTime | dateFormat('YYYY-MM-DD HH:mm') }}</li>\r\n\t\t\t\t<li>最后修改：{{ blog.updateTime | dateFormat('YYYY-MM-DD HH:mm') }}</li>\r\n\t\t\t\t<li>本站点采用<a href=\"https://creativecommons.org/licenses/by/4.0/\" target=\"_blank\"> 署名 4.0 国际 (CC BY 4.0) </a>创作共享协议。可自由转载、引用，并且允许商业性使用。但需署名作者且注明文章出处。</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t<!--评论-->\r\n\t\t<div class=\"ui bottom teal attached segment threaded comments\">\r\n\t\t\t<CommentList :page=\"0\" :blogId=\"blogId\" v-if=\"blog.commentEnabled\"/>\r\n\t\t\t<h3 class=\"ui header\" v-else>评论已关闭</h3>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {getBlogById} from \"@/api/blog\";\r\n\timport CommentList from \"@/components/comment/CommentList\";\r\n\timport {mapState} from \"vuex\";\r\n\timport {SET_FOCUS_MODE, SET_IS_BLOG_RENDER_COMPLETE} from '@/store/mutations-types';\r\n\r\n\texport default {\r\n\t\tname: \"Blog\",\r\n\t\tcomponents: {CommentList},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tblog: {},\r\n\t\t\t\tbigFontSize: false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tblogId() {\r\n\t\t\t\treturn parseInt(this.$route.params.id)\r\n\t\t\t},\r\n\t\t\t...mapState(['siteInfo', 'focusMode'])\r\n\t\t},\r\n\t\tbeforeRouteEnter(to, from, next) {\r\n\t\t\t//路由到博客文章页面之前，应将文章的渲染完成状态置为 false\r\n\t\t\tnext(vm => {\r\n\t\t\t\t// 当 beforeRouteEnter 钩子执行前，组件实例尚未创建\r\n\t\t\t\t// vm 就是当前组件的实例，可以在 next 方法中把 vm 当做 this用\r\n\t\t\t\tvm.$store.commit(SET_IS_BLOG_RENDER_COMPLETE, false)\r\n\t\t\t})\r\n\t\t},\r\n\t\tbeforeRouteLeave(to, from, next) {\r\n\t\t\tthis.$store.commit(SET_FOCUS_MODE, false)\r\n\t\t\t// 从文章页面路由到其它页面时，销毁当前组件的同时，要销毁tocbot实例\r\n\t\t\t// 否则tocbot一直在监听页面滚动事件，而文章页面的锚点已经不存在了，会报\"Uncaught TypeError: Cannot read property 'className' of null\"\r\n\t\t\ttocbot.destroy()\r\n\t\t\tnext()\r\n\t\t},\r\n\t\tbeforeRouteUpdate(to, from, next) {\r\n\t\t\t// 一般有两种情况会触发这个钩子\r\n\t\t\t// ①当前文章页面跳转到其它文章页面\r\n\t\t\t// ②点击目录跳转锚点时，路由hash值会改变，导致当前页面会重新加载，这种情况是不希望出现的\r\n\t\t\t// 在路由 beforeRouteUpdate 中判断路径是否改变\r\n\t\t\t// 如果跳转到其它页面，to.path!==from.path 就放行 next()\r\n\t\t\t// 如果是跳转锚点，path不会改变，hash会改变，to.path===from.path, to.hash!==from.path 不放行路由跳转，就能让锚点正常跳转\r\n\t\t\tif (to.path !== from.path) {\r\n\t\t\t\tthis.$store.commit(SET_FOCUS_MODE, false)\r\n\t\t\t\t//在当前组件内路由到其它博客文章时，要重新获取文章\r\n\t\t\t\tthis.getBlog(to.params.id)\r\n\t\t\t\t//只要路由路径有改变，且停留在当前Blog组件内，就把文章的渲染完成状态置为 false\r\n\t\t\t\tthis.$store.commit(SET_IS_BLOG_RENDER_COMPLETE, false)\r\n\t\t\t\tnext()\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getBlog()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetBlog(id = this.blogId) {\r\n\t\t\t\t//密码保护的文章，需要发送密码验证通过后保存在localStorage的Token\r\n\t\t\t\tconst blogToken = window.localStorage.getItem(`blog${id}`)\r\n\t\t\t\t//如果有则发送博主身份Token\r\n\t\t\t\tconst adminToken = window.localStorage.getItem('adminToken')\r\n\t\t\t\tconst token = adminToken ? adminToken : (blogToken ? blogToken : '')\r\n\t\t\t\tgetBlogById(token, id).then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.blog = res.data\r\n\t\t\t\t\t\tdocument.title = this.blog.title + this.siteInfo.webTitleSuffix\r\n\t\t\t\t\t\t//v-html渲染完毕后，渲染代码块样式\r\n\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\tPrism.highlightAll()\r\n\t\t\t\t\t\t\t//将文章渲染完成状态置为 true\r\n\t\t\t\t\t\t\tthis.$store.commit(SET_IS_BLOG_RENDER_COMPLETE, true)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.msgError(res.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.msgError(\"请求失败\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tchangeFocusMode() {\r\n\t\t\t\tthis.$store.commit(SET_FOCUS_MODE, !this.focusMode)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.el-divider {\r\n\t\tmargin: 1rem 0 !important;\r\n\t}\r\n\r\n\th1::before, h2::before, h3::before, h4::before, h5::before, h6::before {\r\n\t\tdisplay: block;\r\n\t\tcontent: \" \";\r\n\t\theight: 55px;\r\n\t\tmargin-top: -55px;\r\n\t\tvisibility: hidden;\r\n\t}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Blog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Blog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Blog.vue?vue&type=template&id=292c4133&scoped=true&\"\nimport script from \"./Blog.vue?vue&type=script&lang=js&\"\nexport * from \"./Blog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Blog.vue?vue&type=style&index=0&id=292c4133&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"292c4133\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Blog.vue?vue&type=style&index=0&id=292c4133&scoped=true&lang=css&\"","import axios from '@/plugins/axios'\r\n\r\nexport function getBlogById(token, id) {\r\n\treturn axios({\r\n\t\turl: 'blog',\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\tAuthorization: token,\r\n\t\t},\r\n\t\tparams: {\r\n\t\t\tid\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport function checkBlogPassword(blogPasswordForm) {\r\n\treturn axios({\r\n\t\turl: 'checkBlogPassword',\r\n\t\tmethod: 'POST',\r\n\t\tdata: {\r\n\t\t\t...blogPasswordForm\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport function getSearchBlogList(query) {\r\n\treturn axios({\r\n\t\turl: 'searchBlog',\r\n\t\tmethod: 'GET',\r\n\t\tparams: {\r\n\t\t\tquery\r\n\t\t}\r\n\t})\r\n}"],"sourceRoot":""}